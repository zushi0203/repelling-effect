import"./modulepreload-polyfill.b7f2da20.js";import{G as b,l as F}from"./vendor.6fa6146f.js";const S=(...t)=>{const n=Array.from(t);if(n.length<3)return n[0]||0;const s=n.slice().sort((d,l)=>d-l);return s[Math.round((s.length-1)/2)]},L=(t,n)=>Math.sqrt(Math.pow(Math.abs(t),2)+Math.pow(Math.abs(n),2)),H=(t,n,s,d,l)=>{let e,r,i,c,f,h,m,w,x,y,v,P,o,a,u=l.radius,g=l.maxSpeed;for(var p=t.length-1;p>=0;p--){e=t[p],o=e.x,a=e.y,m=0,w=0;const M=n[p];(o!==M||a!==s)&&(r=M-o,i=s-a,c=L(r,i),f=Math.max(c*.2,1),h=Math.atan2(i,r),m=f*Math.cos(h),w=f*Math.sin(h)),x=0,y=0,r=o-d.x,i=a-d.y,r>u||i>u||i<-u||r<-u||(h=Math.atan2(i,r),c=L(r,i),f=Math.max(0,Math.min(u-c,u)),x=f*Math.cos(h),y=f*Math.sin(h)),v=Math.round(S((x+m)*.9,g,-g)),P=Math.round(S((y+w)*.9,g,-g)),v!=0&&(e.x+=v),P!=0&&(e.y+=P),t[p]=e}return t},A=(t,n)=>{t.fillStyle="#282828",t.textAlign="start",t.textBaseline="top",t.font="50px Helvetica",t.fillText(String(n),50,50)},C=(t,n)=>{let s,d,l,e,r,i;t.beginPath(),t.strokeStyle="#d2d2d2",t.moveTo(n[n.length-1].x,n[n.length-1].y);for(var c=n.length-2;c>1;c--)l=n[c],e=l.x,r=l.y,i=n[c-1],s=(e+i.x)/2,d=(r+i.y)/2,t.quadraticCurveTo(e,r,s,d);t.quadraticCurveTo(n[c].x,n[c].y,n[c-1].x,n[c-1].y),t.stroke()},X=(t,n)=>{n.forEach((s,d)=>{t.beginPath(),t.fillStyle="red",t.arc(s.x,s.y,1,0,2*Math.PI),t.fill()})},q=t=>{let n=Date.now(),s=0,d=0;return{computeFrame:()=>{(Date.now()-n)/1e3>1?(n=Date.now(),d=s,s=0,t&&t(d)):s+=1},getFPS:()=>d}};const z=()=>{const t=document.querySelector("#canvas");if(!t)return;const n=t.getContext("2d"),s=800,d=600;t.width=s,t.height=d;const l={x:s/2,y:d/2},e={nPoints:20,nLines:20,radius:100,paddingHorizontal:20,showFPS:!0,showPoints:!0,showLines:!0,maxSpeed:30};window.onload=function(){const o=new b({closed:!0,name:"config"});o.add(e,"nPoints",3,50).step(1).onFinishChange(()=>{console.log("finish",e),v()}),o.add(e,"nLines",3,50).step(1).onFinishChange(a=>{console.log("finish",a,e),v()}),o.add(e,"radius",50,300).step(1),o.add(e,"paddingHorizontal",0,45).step(1).onFinishChange(a=>{console.log("finish",a,e),P()}),o.add(e,"showFPS"),o.add(e,"showPoints"),o.add(e,"maxSpeed",5,100),o.add(e,"showLines")};let r=[],i=[],c=[],f=q(),h=null;const m=()=>{if(!!n){if(n.clearRect(0,0,s,d),e.showFPS){f.computeFrame();const o=f.getFPS();A(n,o)}r=r.map((o,a)=>H(o,i,c[a],l,e)),r.forEach(o=>{e.showLines&&C(n,o),e.showPoints&&X(n,o)}),h=requestAnimationFrame(m)}},w=(o,a)=>({x:o,y:a,hy:a,hx:o}),x=()=>{h&&(cancelAnimationFrame(h),h=null);const o=s*e.paddingHorizontal/100;i=[];for(var a=e.nLines;a>=0;a--){const u=o+(s-o*2)/e.nLines*a;i.push(u)}m()},y=()=>{h&&(cancelAnimationFrame(h),h=null),r=[],i=[],c=[];let o=s*e.paddingHorizontal/100;for(var a=e.nLines;a>=0;a--){const g=[],p=o+(d-o*2)/e.nLines*a;c.push(p);for(var u=e.nPoints;u>=0;u--){let M=Math.round(s/e.nPoints*u);g.push(w(M,p)),a===0&&i.push(M)}r.push(g)}m()},v=F.exports.debounce(y,200),P=F.exports.debounce(x,200);t.addEventListener("mousemove",o=>{l.x=o.offsetX,l.y=o.offsetY}),y()};z();
